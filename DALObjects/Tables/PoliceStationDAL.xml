<?xml version="1.0" encoding="utf-8" ?>

<!-- ********************** THIS FILE HAS BEEN GENERATED FROM TEMPLATE SQLObject.cst (2/27/2007)********************** -->

<SQL>
	<LOAD>
		<![CDATA[	
			SELECT 
				ps.country_id,
				ps.police_station_code,
				ps.police_station_name,
				ps.address1,
				ps.address2,
        ps.address3,
				ps.city,
				ps.region_id,
				ps.postal_code,
				ps.created_by,
				ps.created_date,
				ps.modified_by,
				ps.modified_date,
				ps.police_station_id,
        REGEXP_SUBSTR(v.attribute_value, '[^-]+', 1, 2) as police_station_district_code,
        REGEXP_SUBSTR(v.attribute_value, '[^-]+', 1, 1) as police_station_district_name
      FROM elp_police_station ps
      LEFT JOIN elp_attribute_value      v   on ps.police_station_id = v.reference_id
      LEFT JOIN elp_attribute            a   on a.attribute_id = v.attribute_id
                                            and a.table_name   = 'ELP_POLICE_STATION' 
                                            and a.ui_prog_code = 'DISTRICT_CODE'
			WHERE police_station_id = :police_station_id
		]]>
	</LOAD>
	<LOAD_LIST>
    <![CDATA[	
			SELECT 
        ps.police_station_id,
        ps.police_station_code,
        ps.police_station_name,
        ps.address1,
        ps.address2,
        ps.address3,
        ps.city,
        ps.region_id,
        ps.postal_code,
        ps.created_by,
        ps.created_date,
        ps.modified_by,
        ps.modified_date,
        ps.country_id,
        REGEXP_SUBSTR(v.attribute_value, '[^-]+', 1, 2) as police_station_district_code,
        REGEXP_SUBSTR(v.attribute_value, '[^-]+', 1, 1) as police_station_district_name
      FROM elp_police_station ps
      LEFT JOIN elp_attribute_value      v   on ps.police_station_id = v.reference_id
      LEFT JOIN elp_attribute            a   on a.attribute_id = v.attribute_id
                                            and a.table_name   = 'ELP_POLICE_STATION' 
                                            and a.ui_prog_code = 'DISTRICT_CODE'  
			--dynamic_where_clause
			--dynamic_order_by_clause
		]]>
	</LOAD_LIST>	
	<UPDATE2>
		<![CDATA[	
			UPDATE elp_police_station SET
				country_id = :country_id,
				police_station_code = :police_station_code,
				police_station_name = :police_station_name,
				address1 = :address1,
				address2 = :address2,
        address3 = :address3,
				city = :city,
				region_id = :region_id,
				postal_code = :postal_code,
				modified_by = :modified_by
			WHERE
				police_station_id = :police_station_id
		]]>
	</UPDATE2>
	<INSERT2>
    INSERT INTO elp_police_station
    (
    country_id,
    police_station_code,
    police_station_name,
    address1,
    address2,
    address3,
    city,
    region_id,
    postal_code,
    created_by,
    police_station_id
    )
    VALUES
    (
    :country_id,
    :police_station_code,
    :police_station_name,
    :address1,
    :address2,
    :address3,
    :city,
    :region_id,
    :postal_code,
    :created_by,
    :police_station_id
    )
  </INSERT2>
	<DELETE>
			DELETE FROM elp_police_station
			WHERE
				police_station_id = :police_station_id
	</DELETE>
  <ADD_NEW_POLICE_STATION>
			ELP_POLICE_STATIONS.AddPoliceStation
	</ADD_NEW_POLICE_STATION>
  <INSERT>
    <![CDATA[
      ELP_POLICE_STATIONS.AddPoliceStation
		]]>
  </INSERT>
  <UPDATE>
    <![CDATA[
      ELP_POLICE_STATIONS.UpdatePoliceStation
		]]>
  </UPDATE>
  <MODIFY_POLICE_STATION>
			ELP_POLICE_STATIONS.UpdatePoliceStation
	</MODIFY_POLICE_STATION>
  <DELETE_POLICE_STATION>
			ELP_POLICE_STATIONS.DeletePoliceStation
	</DELETE_POLICE_STATION>
</SQL> 


